# tripwire config
# ---------------------
# Categories are matched by name to your YNAB budget categories.
# No need to look up category IDs anymore!
#
# Auto-alerts:
#   enabled: set to true to automatically create alerts for all YNAB categories with goals
#   exclude: list of category names to skip even if they have goals
#   rules: default alert rules to apply to auto-detected categories
#
# Explicit category configuration (optional if auto_alerts is enabled):
#   enabled: set to false to temporarily disable alerts for this category
#   rules: list of alert rules (same structure as auto_alerts rules)
#
# Rule types:
#   type: goal_threshold | pacing (historical_average TBD)
#   min_hours_between_alerts: minimum hours between repeated alerts for the same trigger.
#       For goal_threshold this effectively means "fire once" if set high (e.g. 744 = 31 days).
#       For pacing this is the re-alert cadence â€” e.g. 24 means once per day.
#   triggers: list of threshold + severity pairs
#     at: threshold expression. Syntax depends on rule type:
#           goal_threshold:
#             "$X remaining"  = alert when dollars remaining drops to X or below
#             "X%"            = alert when percentage of goal spent reaches X or above
#           pacing:
#             "X% over"       = alert when projected end-of-month spend exceeds goal by X%+
#     severity: warning | urgent
#
# pacing-only fields:
#   warm_up_hours: don't evaluate pacing until this many hours into the month.
#       Prevents noisy false positives from single early transactions.

budget_id: "${YNAB_BUDGET_ID}"

# Auto-detect categories with goals and apply default alert rules
auto_alerts:
  enabled: true
  exclude: []  # e.g. ["Emergency Fund", "Vacation"] to skip specific categories
  rules:
    - type: goal_threshold
      min_hours_between_alerts: 744  # once per month
      triggers:
        - at: "75%"
          severity: warning
        - at: "90%"
          severity: urgent

# Explicit category configuration (overrides auto_alerts for these categories)
categories:
  # Example: custom thresholds for groceries
  Groceries:
    enabled: true
    rules:
      - type: goal_threshold
        min_hours_between_alerts: 744
        triggers:
          - at: "50%"
            severity: warning
          - at: "80%"
            severity: urgent

      - type: pacing
        warm_up_hours: 72                 # don't evaluate until day 3
        min_hours_between_alerts: 24      # re-alert at most once per day
        triggers:
          - at: "5% over"
            severity: warning
          - at: "20% over"
            severity: urgent

  # Example: dollar-based threshold
  "Car Maintenance":
    enabled: true
    rules:
      - type: goal_threshold
        min_hours_between_alerts: 744
        triggers:
          - at: "$200 remaining"
            severity: warning

  # Example: temporarily disabled category
  # Vacation:
  #   enabled: false
  #   rules: []
